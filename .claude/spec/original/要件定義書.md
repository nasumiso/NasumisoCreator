# 要件定義書

## ✅ 要件定義書：なすみそクリエイター LoRAスタイル学習支援ツール

### ■ 概要

本プロジェクトは、イラストレーター「なすみそ」氏の絵柄を学習し、LoRAモデルとして再現・応用できるアシスタントツール「なすみそクリエイター」の実装支援・運用基盤を整備することを目的とする。画像の収集・タグ付け・LoRA学習・生成・再利用までを一貫して支援する。

---

### ■ 背景

- 本ツールの開発者は「こすうけ」（個人開発者、生成AIと画像処理に精通する元ゲームプログラマ、使用マシン：MacBook Air M1）
- 「なすみそ」は男性イラストレーターであり、自身のイラストスタイルを学習しAIとの共創に活用したい意向を持つ
- 生成画像の活用方法は、スタンプ、グッズ、構図提案、ラフ生成、プロトタイピングなどを想定

---

### ■ 想定ユーザー

- こすうけ（開発者）：学習・調整・ツール実装を担当
- なすみそ：非エンジニア、画像提供とフィードバックを担当

---

### ■ ゴール

- LoRA学習用の画像データ準備が簡単に行える（画像整理・リネーム・タグ付け）
- kohya_ssベースでLoRAモデルを学習可能（Colabベース想定）
- 学習済みLoRAモデルをWindows環境で使って画像生成できる
- 複数プロジェクト管理（例：「なすみそLoRA」「別キャラLoRA」）ができる

---

### ■ 機能要件（MVP）

### 必須機能

1. 画像管理：
    - 指定フォルダ内の画像を連番リネーム（img001.png など）
    - リサイズ（512x512推奨）
2. タグ付け：
    - DeepBooru / WD14Tagger による自動キャプション生成
    - 画像ごとに `.txt` ファイルを出力（画像名と一致）
3. データセット整形：
    - `datasets/プロジェクト名/` 以下に画像＋テキストファイルを整理
4. 学習支援：
    - Colabノートブック形式でLoRA学習設定（推奨設定をテンプレート化）
    - モデル出力（.safetensors）の保存と共有
5. 画像生成：
    - WebUIでのLoRA使用（**Windows10/11環境での動作を想定**）
    - テスト出力結果の保存（ログ含む）

---

### ■ 非機能要件

- なすみそが簡単に使えるよう、複雑な手作業を排除する
- 複数キャラ／作風に対応するデータ構成設計

---

## ✅ 仕様書（MVP）

### ● データ構成

```
nasumiso_creator/
├── projects/
│   ├── nasumiso_v1/
│   │   ├── images/
│   │   ├── tags/
│   │   ├── resized/
│   │   └── lora_model/
│   └── another_character/
├── notebooks/
│   └── train_lora_template.ipynb
└── outputs/
    └── test_generations/

```

---

### ● 主要ツール・技術

- Python（画像処理・自動タグ付け）
- kohya_ss（LoRA学習）
- Google Colab（GPU学習）
- DeepBooru / WD14Tagger（自動キャプション）
- AUTOMATIC1111 WebUI（**Windows10/11で動作**）

---

### ● 推奨フロー（こすうけ向け）

1. なすみそから画像を受領（ローカル or Drive）
2. スクリプトで連番リネーム＋512x512に変換
3. 自動タグ付け（`.txt`）を出力
4. datasets以下に整理
5. ColabノートブックでLoRA学習実行
6. safetensorsファイルを出力・保存
7. Windows上のWebUIで画像生成をテスト
8. なすみそにフィードバック依頼

---

### ● 今後の拡張想定（フェーズ2以降）

- GUIツール化（ローカルで完結）
- 複数人のスタイル切替・混合LoRA対応
- SDXL対応・画像品質向上機能
- なすみそ向け簡易出力UI（表情差分量産など）

---

